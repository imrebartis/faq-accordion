{"version":3,"file":"index.js","sources":["../../../src/scripts/utils.js","../../../src/scripts/main.js"],"sourcesContent":["'use strict';\n\nexport function getElement(selector, parent = document) {\n  const element = parent.querySelector(selector);\n  if (!element) {\n    throw new Error(`Element with selector \"${selector}\" not found`);\n  }\n  return element;\n}\n\nexport function getElements(selector, parent = document) {\n  const elements = Array.from(parent.querySelectorAll(selector));\n  if (!elements.length) {\n    throw new Error(`No elements found with selector \"${selector}\"`);\n  }\n  return elements;\n}\n\nexport function addEventListenerWithErrorHandling(element, event, handler) {\n  if (!element) {\n    throw new Error('Cannot add event listener to undefined element');\n  }\n  element.addEventListener(event, handler);\n}\n","'use strict';\n\nimport {\n  getElement,\n  getElements,\n  addEventListenerWithErrorHandling,\n} from './utils.js';\n\ntry {\n  const accordion = getElement('.accordion');\n  const accordionHeaders = getElements('.accordion-item-header');\n\n  const handleAccordionClick = (e) => {\n    const activeItem = e.target.closest('.accordion-item');\n    if (!activeItem) return;\n    toggleAccordion(activeItem);\n  };\n\n  addEventListenerWithErrorHandling(accordion, 'click', handleAccordionClick);\n\n  const headerKeydownHandlers = new Map();\n\n  const PLUS_ICON_URL = new URL(\n    '../assets/images/icon-plus.svg',\n    import.meta.url\n  ).href;\n  const MINUS_ICON_URL = new URL(\n    '../assets/images/icon-minus.svg',\n    import.meta.url\n  ).href;\n\n  accordionHeaders.forEach((header) => {\n    header.setAttribute('aria-expanded', 'false');\n\n    const handleKeydown = (e) => {\n      const targetHeader = e.target;\n      const firstHeader = accordionHeaders[0];\n      const lastHeader = accordionHeaders[accordionHeaders.length - 1];\n      let nextHeader;\n      let prevHeader;\n      let item;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          nextHeader =\n            accordionHeaders[accordionHeaders.indexOf(targetHeader) + 1] ||\n            firstHeader;\n          nextHeader.focus();\n          break;\n\n        case 'ArrowUp':\n          e.preventDefault();\n          prevHeader =\n            accordionHeaders[accordionHeaders.indexOf(targetHeader) - 1] ||\n            lastHeader;\n          prevHeader.focus();\n          break;\n\n        case 'Enter':\n        case ' ':\n          e.preventDefault();\n          item = targetHeader.closest('.accordion-item');\n          toggleAccordion(item);\n          break;\n      }\n    };\n\n    headerKeydownHandlers.set(header, handleKeydown);\n    header.addEventListener('keydown', handleKeydown);\n  });\n\n  function toggleAccordion(itemToActivate) {\n    const header = itemToActivate.querySelector('.accordion-item-header');\n    const content = itemToActivate.querySelector('.accordion-content');\n    const img = header.querySelector('.accordion-toggle-icon');\n    const isExpanding = !itemToActivate.classList.contains('active');\n\n    accordionHeaders.forEach((otherHeader) => {\n      const otherItem = otherHeader.closest('.accordion-item');\n      if (otherItem !== itemToActivate) {\n        otherItem.classList.remove('active');\n        otherHeader.setAttribute('aria-expanded', 'false');\n        otherItem\n          .querySelector('.accordion-content')\n          .setAttribute('aria-hidden', 'true');\n        otherItem\n          .querySelector('.accordion-toggle-icon')\n          .setAttribute('src', PLUS_ICON_URL);\n      }\n    });\n\n    if (isExpanding) {\n      itemToActivate.classList.add('active');\n      header.setAttribute('aria-expanded', 'true');\n      content.setAttribute('aria-hidden', 'false');\n      img.setAttribute('src', MINUS_ICON_URL);\n    } else {\n      itemToActivate.classList.remove('active');\n      header.setAttribute('aria-expanded', 'false');\n      content.setAttribute('aria-hidden', 'true');\n      img.setAttribute('src', PLUS_ICON_URL);\n    }\n  }\n\n  const cleanup = () => {\n    accordion.removeEventListener('click', handleAccordionClick);\n    accordionHeaders.forEach((header) => {\n      const keydownHandler = headerKeydownHandlers.get(header);\n      if (keydownHandler) {\n        header.removeEventListener('keydown', keydownHandler);\n      }\n    });\n    headerKeydownHandlers.clear();\n  };\n\n  window.addEventListener('unload', cleanup);\n} catch (error) {\n  console.error('Failed to initialize accordion:', error);\n}\n"],"names":["getElement","selector","parent","element","getElements","elements","addEventListenerWithErrorHandling","event","handler","toggleAccordion","itemToActivate","header","content","img","isExpanding","accordionHeaders","otherHeader","otherItem","PLUS_ICON_URL","MINUS_ICON_URL","accordion","handleAccordionClick","e","activeItem","headerKeydownHandlers","handleKeydown","targetHeader","firstHeader","lastHeader","nextHeader","prevHeader","item","cleanup","keydownHandler","error"],"mappings":"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"}