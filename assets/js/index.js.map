{"version":3,"file":"index.js","sources":["../../../src/scripts/utils.js","../../../src/scripts/main.js"],"sourcesContent":["'use strict';\n\nexport function getElement(selector, parent = document) {\n  const element = parent.querySelector(selector);\n  if (!element) {\n    throw new Error(`Element with selector \"${selector}\" not found`);\n  }\n  return element;\n}\n\nexport function getElements(selector, parent = document) {\n  const elements = Array.from(parent.querySelectorAll(selector));\n  if (!elements.length) {\n    throw new Error(`No elements found with selector \"${selector}\"`);\n  }\n  return elements;\n}\n\nexport function addEventListenerWithErrorHandling(element, event, handler) {\n  if (!element) {\n    throw new Error('Cannot add event listener to undefined element');\n  }\n  element.addEventListener(event, handler);\n}\n","'use strict';\n\nimport {\n  getElement,\n  getElements,\n  addEventListenerWithErrorHandling,\n} from './utils.js';\n\nconst accordion = getElement('.accordion');\nconst accordionHeaders = getElements('.accordion-item-header');\nconst accordionItems = getElements('.accordion-item');\n\nconst plusIcon = new URL('../assets/images/icon-plus.svg', import.meta.url)\n  .href;\nconst minusIcon = new URL('../assets/images/icon-minus.svg', import.meta.url)\n  .href;\n\nconst isTest = process.env.NODE_ENV === 'test';\n\nfunction scheduleUpdate(callback) {\n  if (isTest) {\n    callback();\n  } else {\n    requestAnimationFrame(callback);\n  }\n}\n\nfunction handleKeydown(e, headers) {\n  const { key } = e;\n  const header = e.target;\n  const currentIndex = headers.indexOf(header);\n\n  if (key === 'ArrowDown' || key === 'ArrowUp') {\n    e.preventDefault();\n    const nextIndex =\n      key === 'ArrowDown'\n        ? (currentIndex + 1) % headers.length\n        : (currentIndex - 1 + headers.length) % headers.length;\n    headers[nextIndex].focus();\n  } else if (key === 'Enter' || key === ' ') {\n    e.preventDefault();\n    toggleAccordion(header.closest('.accordion-item'));\n  }\n}\n\nfunction toggleAccordion(item) {\n  const isExpanding = !item.classList.contains('active');\n  const header = item.querySelector('.accordion-item-header');\n  const content = item.querySelector('.accordion-content');\n  const icon = header.querySelector('.accordion-toggle-icon');\n\n  accordionItems.forEach((activeItem) => {\n    if (activeItem !== item && activeItem.classList.contains('active')) {\n      const activeHeader = activeItem.querySelector('.accordion-item-header');\n      activeItem.classList.remove('active');\n      activeHeader.setAttribute('aria-expanded', 'false');\n      activeItem\n        .querySelector('.accordion-content')\n        .setAttribute('aria-hidden', 'true');\n      activeItem\n        .querySelector('.accordion-toggle-icon')\n        .setAttribute('src', plusIcon);\n    }\n  });\n\n  scheduleUpdate(() => {\n    item.classList.toggle('active', isExpanding);\n    header.setAttribute('aria-expanded', isExpanding);\n    content.setAttribute('aria-hidden', !isExpanding);\n    icon.setAttribute('src', isExpanding ? minusIcon : plusIcon);\n  });\n}\n\ntry {\n  addEventListenerWithErrorHandling(accordion, 'click', (e) => {\n    const header = e.target.closest('.accordion-item-header');\n    if (header) {\n      toggleAccordion(header.closest('.accordion-item'));\n    }\n  });\n\n  addEventListenerWithErrorHandling(accordion, 'keydown', (e) => {\n    const header = e.target.closest('.accordion-item-header');\n    if (header) {\n      handleKeydown(e, accordionHeaders);\n    }\n  });\n} catch (error) {\n  console.error('Failed to initialize accordion:', error);\n}\n"],"names":["getElement","selector","parent","element","getElements","elements","addEventListenerWithErrorHandling","event","handler","accordion","accordionHeaders","accordionItems","plusIcon","minusIcon","scheduleUpdate","callback","handleKeydown","headers","key","header","currentIndex","nextIndex","toggleAccordion","item","isExpanding","content","icon","activeItem","activeHeader","error"],"mappings":"ssBAEO,SAASA,EAAWC,EAAUC,EAAS,SAAU,CACtD,MAAMC,EAAUD,EAAO,cAAcD,CAAQ,EAC7C,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,0BAA0BF,CAAQ,aAAa,EAEjE,OAAOE,CACT,CAEO,SAASC,EAAYH,EAAUC,EAAS,SAAU,CACvD,MAAMG,EAAW,MAAM,KAAKH,EAAO,iBAAiBD,CAAQ,CAAC,EAC7D,GAAI,CAACI,EAAS,OACZ,MAAM,IAAI,MAAM,oCAAoCJ,CAAQ,GAAG,EAEjE,OAAOI,CACT,CAEO,SAASC,EAAkCH,EAASI,EAAOC,EAAS,CACzE,GAAI,CAACL,EACH,MAAM,IAAI,MAAM,gDAAgD,EAElEA,EAAQ,iBAAiBI,EAAOC,CAAO,CACzC,CCfA,MAAMC,EAAYT,EAAW,YAAY,EACnCU,EAAmBN,EAAY,wBAAwB,EACvDO,EAAiBP,EAAY,iBAAiB,EAE9CQ,EAAW,IAAA,IAAA,6CAAA,YAAA,GAAA,EACd,KACGC,EAAY,IAAA,IAAA,8CAAA,YAAA,GAAA,EACf,KAIH,SAASC,EAAeC,EAAU,CAI9B,sBAAsBA,CAAQ,CAElC,CAEA,SAASC,EAAc,EAAGC,EAAS,CAC3B,KAAA,CAAE,IAAAC,GAAQ,EACVC,EAAS,EAAE,OACXC,EAAeH,EAAQ,QAAQE,CAAM,EAEvC,GAAAD,IAAQ,aAAeA,IAAQ,UAAW,CAC5C,EAAE,eAAe,EACX,MAAAG,EACJH,IAAQ,aACHE,EAAe,GAAKH,EAAQ,QAC5BG,EAAe,EAAIH,EAAQ,QAAUA,EAAQ,OAC5CA,EAAAI,CAAS,EAAE,MAAM,CAChB,MAAAH,IAAQ,SAAWA,IAAQ,OACpC,EAAE,eAAe,EACDI,EAAAH,EAAO,QAAQ,iBAAiB,CAAC,EAErD,CAEA,SAASG,EAAgBC,EAAM,CAC7B,MAAMC,EAAc,CAACD,EAAK,UAAU,SAAS,QAAQ,EAC/CJ,EAASI,EAAK,cAAc,wBAAwB,EACpDE,EAAUF,EAAK,cAAc,oBAAoB,EACjDG,EAAOP,EAAO,cAAc,wBAAwB,EAE3CR,EAAA,QAASgB,GAAe,CACrC,GAAIA,IAAeJ,GAAQI,EAAW,UAAU,SAAS,QAAQ,EAAG,CAC5D,MAAAC,EAAeD,EAAW,cAAc,wBAAwB,EAC3DA,EAAA,UAAU,OAAO,QAAQ,EACvBC,EAAA,aAAa,gBAAiB,OAAO,EAClDD,EACG,cAAc,oBAAoB,EAClC,aAAa,cAAe,MAAM,EACrCA,EACG,cAAc,wBAAwB,EACtC,aAAa,MAAOf,CAAQ,CAAA,CACjC,CACD,EAEDE,EAAe,IAAM,CACdS,EAAA,UAAU,OAAO,SAAUC,CAAW,EACpCL,EAAA,aAAa,gBAAiBK,CAAW,EACxCC,EAAA,aAAa,cAAe,CAACD,CAAW,EAChDE,EAAK,aAAa,MAAOF,EAAcX,EAAYD,CAAQ,CAAA,CAC5D,CACH,CAEA,GAAI,CACgCN,EAAAG,EAAW,QAAU,GAAM,CAC3D,MAAMU,EAAS,EAAE,OAAO,QAAQ,wBAAwB,EACpDA,GACcG,EAAAH,EAAO,QAAQ,iBAAiB,CAAC,CACnD,CACD,EAEiCb,EAAAG,EAAW,UAAY,GAAM,CAC9C,EAAE,OAAO,QAAQ,wBAAwB,GAEtDO,EAAc,EAAGN,CAAgB,CACnC,CACD,CACH,OAASmB,EAAO,CACN,QAAA,MAAM,kCAAmCA,CAAK,CACxD"}